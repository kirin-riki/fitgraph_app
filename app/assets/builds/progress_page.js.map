{
  "version": 3,
  "sources": ["../../javascript/progress_page.js"],
  "sourcesContent": ["/* ============ Progress Page - \u30DA\u30FC\u30B8\u521D\u671F\u5316\u6A5F\u80FD ============ */\n\n/* ============ \u30DA\u30FC\u30B8\u521D\u671F\u5316\u95A2\u6570 ============== */\nfunction initGraphPage() {\n  // \u5FC5\u8981\u306A\u8981\u7D20\u304C\u5B58\u5728\u3059\u308B\u304B\u30C1\u30A7\u30C3\u30AF\n  const graphView = document.getElementById(\"graph-view\");\n  const photoView = document.getElementById(\"photo-view\");\n  const tabGraph = document.getElementById(\"tab-graph\");\n  const tabPhoto = document.getElementById(\"tab-photo\");\n  const weightChart = document.getElementById(\"weightChart\");\n\n  // \u5FC5\u8981\u306A\u8981\u7D20\u304C\u5B58\u5728\u3057\u306A\u3044\u5834\u5408\u306F\u65E9\u671F\u7D42\u4E86\n  if (!graphView || !photoView || !tabGraph || !tabPhoto || !weightChart) {\n    return;\n  }\n\n  // \u3069\u3061\u3089\u306E\u30BF\u30D6\u3092\u521D\u671F\u8868\u793A\u3059\u308B\u304B\u5224\u5B9A\n  const initialTab = (window.activeTab === \"photo\") ? \"photo\" : \"graph\";\n  if (initialTab === \"photo\") {\n    graphView.classList.add(\"hidden\");\n    photoView.classList.remove(\"hidden\");\n    setMainTab(\"photo\");\n    // \u7D71\u8A08\u8868\u3092\u975E\u8868\u793A\n    document.getElementById(\"stats-table\").classList.add(\"hidden\");\n  } else {\n    graphView.classList.remove(\"hidden\");\n    photoView.classList.add(\"hidden\");\n    setMainTab(\"graph\");\n    // \u7D71\u8A08\u8868\u3092\u8868\u793A\n    document.getElementById(\"stats-table\").classList.remove(\"hidden\");\n    document.getElementById(\"stats-content\").classList.remove(\"hidden\");\n  }\n\n  // \u30B0\u30E9\u30D6\u30D3\u30E5\u30FC\u306E\u671F\u9593\u30BF\u30D6\u3092\u521D\u671F\u5316\n  document.querySelectorAll(\"#graph-view .period-tab\").forEach(btn => {\n    if (btn.dataset.period === \"3m\") {\n      btn.classList.add(\"bg-violet-500\", \"text-white\");\n      btn.classList.remove(\"bg-violet-100\", \"text-violet-600\");\n    } else {\n      btn.classList.remove(\"bg-violet-500\", \"text-white\");\n      btn.classList.add(\"bg-violet-100\", \"text-violet-600\");\n    }\n  });\n\n  // \u5199\u771F\u30D3\u30E5\u30FC\u306E\u671F\u9593\u30BF\u30D6\u3082\u521D\u671F\u5316\n  document.querySelectorAll(\"#photo-view .period-tab\").forEach(btn => {\n    btn.classList.remove(\"bg-violet-500\", \"text-white\");\n    btn.classList.add(\"bg-violet-100\", \"text-violet-600\");\n  });\n  const photo3m = document.querySelector('#photo-view .period-tab[data-period=\"3m\"]');\n  if (photo3m) {\n    photo3m.classList.remove(\"bg-violet-100\", \"text-violet-600\");\n    photo3m.classList.add(\"bg-violet-500\", \"text-white\");\n  }\n\n  // \u65E2\u5B58\u306EChart.js\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\u3092\u30AF\u30EA\u30A2\n  if (typeof Chart !== 'undefined' && Chart.helpers) {\n    Chart.helpers.each(Chart.instances, (instance) => {\n      instance.destroy();\n    });\n  }\n\n  if (window.chart) {\n    window.chart.destroy();\n    window.chart = null;\n  }\n\n  /* ---- \u30BF\u30D6\u5207\u66FF\uFF08\u30B0\u30E9\u30D5/\u5199\u771F\uFF09 ---------------- */\n  function setMainTab(active) {\n    const on = \"w-full bg-violet-500 text-white py-2 rounded text-xs sm:text-sm\";\n    const off = \"w-full bg-violet-100 text-violet-500 py-2 rounded text-xs sm:text-sm\";\n    tabGraph.className = active === \"graph\" ? on : off;\n    tabPhoto.className = active === \"photo\" ? on : off;\n  }\n\n  tabGraph.onclick = () => {\n    graphView.classList.remove(\"hidden\");\n    photoView.classList.add(\"hidden\");\n    setMainTab(\"graph\");\n    // \u7D71\u8A08\u8868\u3092\u8868\u793A\n    document.getElementById(\"stats-table\").classList.remove(\"hidden\");\n    document.getElementById(\"stats-content\").classList.remove(\"hidden\");\n    // \u671F\u9593\u30DC\u30BF\u30F3\u30923\u30F6\u6708\u306B\u30EA\u30BB\u30C3\u30C8\n    document.querySelectorAll(\"#graph-view .period-tab\").forEach(btn => {\n      if (btn.dataset.period === \"3m\") {\n        btn.classList.add(\"bg-violet-500\", \"text-white\");\n        btn.classList.remove(\"bg-violet-100\", \"text-violet-600\");\n      } else {\n        btn.classList.remove(\"bg-violet-500\", \"text-white\");\n        btn.classList.add(\"bg-violet-100\", \"text-violet-600\");\n      }\n    });\n    if (window.renderChart) {\n      window.renderChart(\"3m\");\n    }\n  };\n\n  tabPhoto.onclick = () => {\n    graphView.classList.add(\"hidden\");\n    photoView.classList.remove(\"hidden\");\n    setMainTab(\"photo\");\n    // \u7D71\u8A08\u8868\u3092\u975E\u8868\u793A\n    document.getElementById(\"stats-table\").classList.add(\"hidden\");\n    // \u671F\u9593\u30DC\u30BF\u30F3\u30923\u30F6\u6708\u306B\u30EA\u30BB\u30C3\u30C8\n    document.querySelectorAll(\"#photo-view .period-tab\").forEach(btn => {\n      if (btn.dataset.period === \"3m\") {\n        btn.classList.add(\"bg-violet-500\", \"text-white\");\n        btn.classList.remove(\"bg-violet-100\", \"text-violet-600\");\n      } else {\n        btn.classList.remove(\"bg-violet-500\", \"text-white\");\n        btn.classList.add(\"bg-violet-100\", \"text-violet-600\");\n      }\n    });\n    // Stimulus\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC\u30673m\u306B\u30EA\u30BB\u30C3\u30C8\n    const photoSwitcher = document.querySelector('[data-controller=\"photo-switcher\"]');\n    if (photoSwitcher?.controller) {\n      if (typeof photoSwitcher.controller.setPeriod === 'function') {\n        photoSwitcher.controller.setPeriod(\"3m\");\n      }\n    } else if (window.application && window.application.getControllerForElementAndIdentifier) {\n      // Stimulus v3\u4EE5\u964D\u306E\u53D6\u5F97\u65B9\u6CD5\n      const controller = window.application.getControllerForElementAndIdentifier(photoSwitcher, \"photo-switcher\");\n      if (controller && typeof controller.setPeriod === 'function') {\n        controller.setPeriod(\"3m\");\n      }\n    }\n  };\n\n  /* ---- \u671F\u9593\u30DC\u30BF\u30F3 ------------------------------ */\n  document.querySelectorAll(\".period-tab\").forEach(btn => {\n    btn.addEventListener(\"click\", () => {\n      document.querySelectorAll(\".period-tab\").forEach(b => {\n        b.classList.remove(\"bg-violet-500\", \"text-white\");\n        b.classList.add(\"bg-violet-100\", \"text-violet-600\");\n      });\n      btn.classList.remove(\"bg-violet-100\", \"text-violet-600\");\n      btn.classList.add(\"bg-violet-500\", \"text-white\");\n      if (window.renderChart) {\n        window.renderChart(btn.dataset.period);\n      }\n    });\n  });\n\n  // \u521D\u671F\u8868\u793A\n  if (window.renderChart) {\n    window.renderChart(\"3m\");\n  }\n\n  // \u30EA\u30B5\u30A4\u30BA\u6642\u306E\u5BFE\u5FDC\n  window.addEventListener('resize', () => {\n    if (window.chart && window.renderChart) {\n      window.renderChart(document.querySelector('.period-tab.bg-violet-500')?.dataset.period || '3m');\n    }\n  });\n}\n\n/* --------- \u30A4\u30D9\u30F3\u30C8\u767B\u9332 (Turbo\u5BFE\u5FDC) ---------- */\ndocument.addEventListener(\"turbo:load\", initGraphPage);\n\n// \u7D71\u8A08\u8868\u306E\u521D\u671F\u5316\u3068\u30A4\u30D9\u30F3\u30C8\u767B\u9332\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  if (window.updateStatsTable) {\n    window.updateStatsTable('3m');\n  }\n  if (window.patchPeriodTabEvents) {\n    window.patchPeriodTabEvents();\n  }\n});\n\ndocument.addEventListener(\"turbo:load\", () => {\n  if (window.updateStatsTable) {\n    window.updateStatsTable('3m');\n  }\n  if (window.patchPeriodTabEvents) {\n    window.patchPeriodTabEvents();\n  }\n});\n"],
  "mappings": "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",
  "names": []
}
